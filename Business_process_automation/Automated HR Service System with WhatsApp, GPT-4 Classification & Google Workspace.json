{
  "name": "Automated HR Service System with WhatsApp, GPT-4 Classification & Google Workspace",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "messages"
        ],
        "options": {}
      },
      "id": "23268739-ec47-4f23-a335-390cde2ef888",
      "name": "WhatsApp Trigger",
      "type": "n8n-nodes-base.whatsAppTrigger",
      "position": [
        -2304,
        1488
      ],
      "webhookId": "2697cc31-76d4-482e-b0a5-212bb93f7203",
      "typeVersion": 1,
      "credentials": {
        "whatsAppTriggerApi": {
          "id": "4EjgsZyRG0PEBfyY",
          "name": "WhatsApp OAuth account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "94481a64-b102-4088-b336-cbd1cfbd2485",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].text }}",
                    "rightValue": "text"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Text"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "d16eb899-cccb-41b6-921e-172c525ff92c",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].audio }}",
                    "rightValue": "voice"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Audio"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "b297dfe7-ce3c-47c5-bb4b-e37a6aed73e0",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.messages[0].image }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Image"
            }
          ]
        },
        "options": {}
      },
      "id": "bf3ec810-2af1-4abe-af7c-d121720d8c05",
      "name": "Verify Message Type",
      "type": "n8n-nodes-base.switch",
      "position": [
        2224,
        992
      ],
      "typeVersion": 3.2,
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "model": "gpt-4.1-nano",
        "options": {}
      },
      "id": "d74f1b43-4c45-46bc-9497-b1f69a0e7c2a",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        4032,
        928
      ],
      "typeVersion": 1.1,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1b053bb4-ee13-478f-a254-e2c0873bfe3f",
              "name": "messages[0].text.body",
              "type": "string",
              "value": "={{ $json.messages[0].text.body }}"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "b5bfc9d3-b0c5-445c-855e-b680e2a8bcc2",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        2384,
        704
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "whatsAppApi",
        "options": {}
      },
      "id": "186ca8c1-f358-4329-ac14-84789e102446",
      "name": "HTTP Request1",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        2752,
        1280
      ],
      "typeVersion": 4.2,
      "credentials": {
        "httpBearerAuth": {
          "id": "vBDMEm4SRh6IQXEV",
          "name": "Bearer Auth account"
        },
        "httpBasicAuth": {
          "id": "ySdx1kTcjFgBrk5X",
          "name": "Unnamed credential"
        },
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "id": "2261ead5-24b0-4437-9f1f-d087126a1ebc",
      "name": "OpenAI Chat Model3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1008,
        2304
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Earth radius in meters\nconst R = 6371000;\n\n// Convert degrees to radians\nconst toRad = deg => deg * Math.PI / 180;\n\n// Extract coordinates from the input JSON safely\nconst inputJson = $input.first().json;\nlet lat, lon;\nif (inputJson.messages && Array.isArray(inputJson.messages) && inputJson.messages[0] && inputJson.messages[0].location) {\n  lat = inputJson.messages[0].location.latitude;\n  lon = inputJson.messages[0].location.longitude;\n} else {\n  return [{ json: { error: \"Missing location data in input\" } }];\n}\n\n// Office polygon vertices [lat, lon]\nconst officePolygon = [\n  [23.79672622413635, 90.36664994287338],\n  [23.79662498938379, 90.36668481158857],\n  [23.796643395708305, 90.36675320791454],\n  [23.796771626363387, 90.36672973858701]\n];\n\n// Distance threshold in meters\nconst distanceThreshold = 2100; // ~100m\n\nlet isNearby = false;\n\n// Haversine distance function\nfunction haversine(lat1, lon1, lat2, lon2) {\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  const a = Math.sin(dLat / 2) ** 2 +\n            Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *\n            Math.sin(dLon / 2) ** 2;\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n// Check distance to each polygon vertex\nfor (const [polyLat, polyLon] of officePolygon) {\n  const distance = haversine(lat, lon, polyLat, polyLon);\n  if (distance <= distanceThreshold) {\n    isNearby = true;\n    break;\n  }\n}\n\n// Output\nreturn [{\n  json: {\n    ...$input.first().json,\n    latitude: lat,\n    longitude: lon,\n    isInsideOffice: isNearby\n  }\n}];\n"
      },
      "id": "6a69cd89-1f85-4a82-ba67-9f9aad55983d",
      "name": "Code1",
      "type": "n8n-nodes-base.code",
      "position": [
        800,
        2128
      ],
      "executeOnce": true,
      "typeVersion": 2
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-nano",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "id": "1ddccf18-317a-403d-906f-bdaa3ef79615",
      "name": "OpenAI Chat Model1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        4432,
        1152
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "tableName": {
          "__rl": true,
          "mode": "list",
          "value": "data",
          "cachedResultName": "data"
        },
        "options": {}
      },
      "id": "c6f58ebd-506c-4835-9c26-60a97faafbf9",
      "name": "Supabase Vector Store",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "position": [
        4144,
        1232
      ],
      "typeVersion": 1.2,
      "credentials": {
        "supabaseApi": {
          "id": "C5sJ0KzudLYFhQbM",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "6921f7a4-fd30-4e00-bd6e-560bdcb958bb",
      "name": "Embeddings OpenAI",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "position": [
        4240,
        1392
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2275a69d-d125-46f2-ae25-c438859b0042",
              "name": "text",
              "type": "string",
              "value": "={{ $json.text }}"
            }
          ]
        },
        "options": {}
      },
      "id": "5d86d260-124f-4542-9018-99e1ab2f44d9",
      "name": "Edit Fields1",
      "type": "n8n-nodes-base.set",
      "position": [
        3088,
        704
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "759240be-4cc1-44de-8644-f62631553a09",
              "name": "content",
              "type": "string",
              "value": "={{ $json.content }}"
            }
          ]
        },
        "options": {}
      },
      "id": "4b1d4e83-9cfb-4238-9da2-90f67e111f36",
      "name": "Edit Fields2",
      "type": "n8n-nodes-base.set",
      "position": [
        2944,
        704
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-nano",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {}
      },
      "id": "67125e32-d7c4-48b8-bc53-a03dccac9e9c",
      "name": "OpenAI Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        480,
        464
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d34884e2-97b4-47da-86c9-cddcfdb8c23f",
              "name": "messages[0].text.body",
              "type": "string",
              "value": "={{ $json.messages[0].text.body }}"
            }
          ]
        },
        "options": {}
      },
      "id": "d7aba1f0-7cfe-44a0-b6fe-46f36f9b07a9",
      "name": "Edit Fields3",
      "type": "n8n-nodes-base.set",
      "position": [
        144,
        240
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"name\": \"tanay\",\n  \"email\" : \"tanay@gmail.com\",\n  \"score\": 0.8,\n  \"shortlist\" : \"yes\",\n  \"reason\": \"Does not meet required number of experience in years\",\n  \"missing skills\": \"list of missing skills\"\n}"
      },
      "id": "574296d2-95d5-489e-aa23-017d09dbf0fe",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1440,
        3712
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "id",
          "value": "gpt-4o-mini"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an HR assistant generating personalized recruitment emails based on candidate data for ICICI bank (mention in subject and content). Below is a candidateâ€™s information:\nthe input instructions are {{ $('WhatsApp Trigger').item.json.messages[0].text.body }}. extract number of candidates and poistion from this \n\nName: {{ $('Google Sheets2').item.json.Name }}\nEmail:{{ $('Shortlist Agent').item.json.output.email }}\nShortlist Status:  {{ $('Google Sheets2').item.json.Shortlist }}\nmessage {{ $('Book Meeting').item.json.output.message }}\nWrite a professional email:\n\n- If the candidate is shortlisted (`Shortlist` is \"yes\"):\n    - Congratulate the candidate on being shortlisted.\n    - Mention the position and the interview timings. mention in normal date time format\n    - Be encouraging and appreciative.\n\n- If the candidate is not shortlisted (`Shortlist` is \"no\"):\n    - Politely inform them they have not been selected.\n    - \n    - Thank them for applying and encourage future applications if appropriate.\n\nThe email should be polite, human-sounding, clear, and well-formatted.\n\nOutput as \nto: \nsubject: \"make this more detailed\"\ncontent\nsend the email using gmail node and write a whatsapp message confirming it \n\n",
              "role": "assistant"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "id": "9f7bf2d0-eb38-423c-868a-f7e4d9876474",
      "name": "Personalize email",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "position": [
        2720,
        3632
      ],
      "typeVersion": 1.7,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "nstamanna19@gmail.com",
          "mode": "list",
          "cachedResultName": "nstamanna19@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', `The start time for the meeting`, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', `The end time for the meeting`, 'string') }}",
        "additionalFields": {
          "location": "=Online"
        }
      },
      "id": "4124de99-677f-44ad-8874-95f45402933f",
      "name": "Google Calendar",
      "type": "n8n-nodes-base.googleCalendarTool",
      "position": [
        1904,
        3760
      ],
      "typeVersion": 1.2,
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "GFKtagMVomERHWQS",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "=1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 1214220799,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc/edit#gid=1214220799",
          "cachedResultName": "applicants"
        },
        "columns": {
          "value": {
            "Name": "={{ $json.output.name }}",
            "Score": "={{ $json.output.score }}",
            "Reason": "={{ $json.output.reason }}",
            "Shortlist": "={{ $json.output.shortlist }}",
            "MIssing Skills": "={{ $json.output['missing skills'] }}"
          },
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "Email",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Applying for",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "Applying for",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "CV link",
              "type": "string",
              "display": true,
              "removed": true,
              "required": false,
              "displayName": "CV link",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Score",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Score",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Shortlist",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Shortlist",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Reason",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Reason",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "MIssing Skills",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "MIssing Skills",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Name"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "583cb943-7792-412e-b24f-49273363ea1f",
      "name": "Google Sheets2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1520,
        3488
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "ddf15804-6b35-46ec-8f6d-875d3aa38b4f",
      "name": "OpenAI Chat Model4",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        864,
        3712
      ],
      "typeVersion": 1,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "id": "adbb79fa-a29f-44e4-a5c4-9edd459311ae",
      "name": "Gmail1",
      "type": "n8n-nodes-base.gmailTool",
      "position": [
        2992,
        3840
      ],
      "webhookId": "28598a60-910b-45d2-b4c6-f581f0c3f2e0",
      "typeVersion": 2.1,
      "credentials": {
        "gmailOAuth2": {
          "id": "GwE8kZsToPV68IWi",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 348541712,
          "mode": "list",
          "cachedResultName": "jd_sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=348541712"
        },
        "options": {}
      },
      "id": "56d9c380-cfeb-4ff0-8049-2c2c578851bc",
      "name": "JD tool",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        1008,
        3824
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 120018970,
          "mode": "list",
          "cachedResultName": "applicants",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=120018970"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Applying for",
              "lookupValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('values0_Value', ``, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "id": "18c91c96-5fca-433a-80b5-632aa0e80dc5",
      "name": "applicants",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        1152,
        3872
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "description": "call this tool to get downloaded and extracted cv",
        "source": "parameter",
        "workflowJson": "={\n  \"name\": \"My workflow 3\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"operation\": \"download\",\n        \"fileId\": {\n          \"__rl\": true,\n          \"value\": \"=https://drive.google.com/file/d/1_lAwQBG7BITidr8DPXclZSxWp_2ZPJ3H/view?usp=sharing\",\n          \"mode\": \"url\"\n        },\n        \"options\": {}\n      },\n      \"id\": \"9feaa5fc-b85a-41d5-8e37-4c52fd0fddee\",\n      \"name\": \"download CV\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -1520,\n        160\n      ],\n      \"typeVersion\": 3,\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"LQx4eK8lTDnFORcL\",\n          \"name\": \"Google Drive account 3\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"operation\": \"pdf\",\n        \"options\": {}\n      },\n      \"id\": \"18774bfe-6a10-4a3f-a12b-ae374ad9d928\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        -1060,\n        160\n      ],\n      \"typeVersion\": 1\n    },\n    {\n      \"parameters\": {\n        \"documentId\": {\n          \"__rl\": true,\n          \"value\": \"1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Untitled spreadsheet\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc/edit?usp=drivesdk\"\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"value\": 1214220799,\n          \"mode\": \"list\",\n          \"cachedResultName\": \"applicants\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc/edit#gid=1214220799\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"typeVersion\": 4.6,\n      \"position\": [\n        -1800,\n        160\n      ],\n      \"id\": \"88198974-6f9a-4a4c-a400-1efe61634584\",\n      \"name\": \"Google Sheets\",\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"U3oQStbFsePTfOCg\",\n          \"name\": \"Google Sheets account 3\"\n        }\n      }\n    },\n    {\n      \"parameters\": {},\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"typeVersion\": 1,\n      \"position\": [\n        -2040,\n        160\n      ],\n      \"id\": \"444d8fb5-f167-4228-8870-cc8c6ee5d2e7\",\n      \"name\": \"When clicking â€˜Execute workflowâ€™\"\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"download CV\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Google Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"download CV\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking â€˜Execute workflowâ€™\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": false,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b83a5fe1-8ad2-48cc-8d2a-778c0131c618\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"60ec675227f8b8ddf9f06a67b49cab3340ac72df709fd0ce0a5249b51b99f4fe\"\n  },\n  \"id\": \"ljyzZaJUlYFCG9go\",\n  \"tags\": [\n    {\n      \"createdAt\": \"2025-06-06T05:05:58.931Z\",\n      \"updatedAt\": \"2025-06-06T05:05:58.931Z\",\n      \"id\": \"cGamkQygZH77eaiZ\",\n      \"name\": \"AI Assistant\"\n    }\n  ]\n}"
      },
      "id": "9eb56fae-bc9c-40ef-8420-8d1950eda806",
      "name": "n8n",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "position": [
        1232,
        3760
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "d2c8cfaf-67f3-4936-8aa2-950ff58eaf27",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              },
              "leftValue": "={{ $json.data.approved }}",
              "rightValue": "true"
            }
          ]
        },
        "options": {}
      },
      "id": "bf24e8b0-856b-433d-9336-9b8ad3bd7407",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        2400,
        3504
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "id": "10224c9a-7f4c-46e6-a5b7-9e053165d32c",
      "name": "OpenAI Chat Model5",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1728,
        3728
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"message\" : \"meeting has been scheduled from 11am to 11.30 am on 13th june 26 using google calendar.\",\n  \"link\" :\"This is the meeting link - hdawodianwdawd.com\"\n}"
      },
      "id": "122fc390-991d-46f6-9541-8462216635bb",
      "name": "Structured Output Parser1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        2032,
        3712
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "8d2f59b4-24d3-43ea-823d-da3941f56489",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "1"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "leave req"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "b21768f6-90b5-4d17-ae4a-614133fd7ec5",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "2"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "hr chatbot"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "7fec0d2d-2415-409a-9ee9-428ff93528de",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "3"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "attendance"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "295cf88b-ea09-49fe-8290-56b9bb08d555",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "4"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "req/complaint mail"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "fdd43ca7-f523-4583-8346-54364c039e79",
                    "operator": {
                      "name": "filter.operator.equals",
                      "type": "string",
                      "operation": "equals"
                    },
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "5"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "shortlist "
            }
          ]
        },
        "options": {}
      },
      "id": "65fbf358-e1b9-4090-8dfd-5a2e97dc550b",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "position": [
        -1120,
        1584
      ],
      "typeVersion": 3.2
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "id": "2b15d345-d881-4f0f-bc2d-72fb2a63a5af",
      "name": "OpenAI Chat Model6",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        960,
        3024
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "id": "471640d9-1678-4a88-9f70-8086c260aebc",
      "name": "Gmail2",
      "type": "n8n-nodes-base.gmailTool",
      "position": [
        1264,
        3024
      ],
      "webhookId": "f5e174c7-8bff-4e1c-aee7-b05069eee2d0",
      "typeVersion": 2.1,
      "credentials": {
        "gmailOAuth2": {
          "id": "GwE8kZsToPV68IWi",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 595359392,
          "mode": "list",
          "cachedResultName": "leaves",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=595359392"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "name",
              "lookupValue": "={{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}"
            }
          ]
        },
        "options": {}
      },
      "id": "477429a9-604b-408a-aaac-af32012f2121",
      "name": "dept head email",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        1120,
        3072
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "id": "771acf88-af50-4ed4-b0e5-870b5a2cc880",
      "name": "OpenAI Chat Model7",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        -2128,
        1904
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "2I6nkGXnPJR1so01",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"message\" : \"Exit time updated: 18:10, 11-06-202\"\n}"
      },
      "id": "c2352a66-1a7c-431d-b8f0-b2a341a587a0",
      "name": "Structured Output Parser2",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1360,
        2288
      ],
      "typeVersion": 1.2
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Append or update row in sheet in Google Sheets",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1610217683,
          "mode": "list",
          "cachedResultName": "rec_shortlist_sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=1610217683"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Name": "={{ $json.contacts[0].profile.name }}",
            "Exit Time": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Exit_Time', ``, 'string') }}",
            "Entry Time": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Entry_Time', ``, 'string') }}",
            "Date": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Date', ``, 'string') }}"
          },
          "matchingColumns": [
            "Name"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Entry Time",
              "displayName": "Entry Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Exit Time",
              "displayName": "Exit Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "7a938648-e036-42cc-8036-f9720eb6063d",
      "name": "putrows",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        1152,
        2384
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "mode": "chooseBranch",
        "useDataOfInput": 2
      },
      "id": "b03d945d-8775-4ba3-acaf-7270d4733065",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        -544,
        1744
      ],
      "typeVersion": 3.2
    },
    {
      "parameters": {
        "mode": "chooseBranch"
      },
      "id": "40a60020-3933-4c9d-947e-47231a665f7e",
      "name": "Merge1",
      "type": "n8n-nodes-base.merge",
      "position": [
        -544,
        1520
      ],
      "typeVersion": 3.2
    },
    {
      "parameters": {
        "mode": "chooseBranch"
      },
      "id": "93903fd6-e79c-42ee-8335-b60dcef48412",
      "name": "Merge2",
      "type": "n8n-nodes-base.merge",
      "position": [
        -544,
        1280
      ],
      "typeVersion": 3.2
    },
    {
      "parameters": {
        "content": "LLM Message Classifier (WhatsApp Trigger)\nClassifies incoming WhatsApp messages into 5 categories using message.type and text.body\n\nRules:\nIf type = \"text\":\n1 = Leave request (e.g. \"I need leave tomorrow\")\n2 = HR query/policy/FAQ (e.g. \"How many leaves left?\")\n5 = Shortlist candidates (e.g. \"Filter CVs for backend\")\n4 = Escalation/complaint to dept head (e.g. \"Mail to IT\")\n\nIf type = \"location\":\n3 = Attendance via GPS\n\nIf type = \"audio\" or \"image\":\n2 = HR query via media\n\nStrict output: only return one number (1, 2, 3, 4, or 5) with no text or formatting\n",
        "height": 660,
        "width": 1260
      },
      "id": "ec5561fe-0050-4d3a-af2d-24101c51ccbc",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3024,
        1392
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Switch Router (Based on LLM Output)\nTakes number output from LLM (1â€“5) and routes flow accordingly:\n\n1 â†’ Route to Leave Agent\n2 â†’ Route to HR FAQ Agent\n3 â†’ Route to Attendance Marking\n4 â†’ Route to Escalation Agent\n5 â†’ Route to Shortlisting Agent\n\nUse Merge node after each path to bring back original WhatsApp data from trigger for agent processing.\n",
        "height": 860,
        "width": 920,
        "color": 5
      },
      "id": "e5989a47-18e1-44d6-9f01-21b883050627",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1216,
        1072
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Leave Agent\nIf leave duration < 2 days â†’ auto-approve\nIf â‰¥ 2 days â†’ escalate to dept head\n\nDept head email is fetched from Google Sheets based on employee data\nUse IF node to compare duration, then route accordingly\n",
        "height": 640,
        "width": 1040
      },
      "id": "b822ff89-3067-41a4-a403-542ab68a52b5",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Attendance Handler\nCode node defines office polygon (geo boundary)\nChecks if location is inside polygon = present\n\nAI Agent:\nIf no entry for name â†’ write date & time as entry\nIf entry exists â†’ add time as exit\nIf user requests OT â†’ calculate & add overtime entry\n",
        "height": 580,
        "width": 1220,
        "color": 3
      },
      "id": "7aff2f49-16b0-4613-a4f8-29f08c3b75ff",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        608,
        1952
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Shortlisting Agent\nUses JD + applicants sheet to filter candidates (count from WhatsApp)\nWrites: score, reason, missing skills â†’ to sheet\n\nSchedules meeting via calendar\nIf user confirms on WhatsApp â†’ sends email to shortlisted candidate\n",
        "height": 660,
        "width": 3220,
        "color": 5
      },
      "id": "ba38722e-3ee7-4c44-8c64-4f7ecb7bb530",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -144,
        3408
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Final WhatsApp Responder\nCollects responses from all agents\nFormats final message to user with relevant updates\n\nSupports interactive reply options for next steps\n(e.g. confirm, ask more, request edit)\n",
        "height": 620,
        "width": 720
      },
      "id": "f908540e-9839-44fb-8e1b-aac5e4015fb4",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2832,
        2128
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "Request/Complaint Agent\nGenerates email content from WhatsApp message\nFetches dept head email from Google Sheets\nSends email to dept head with complaint/request details\n",
        "height": 580,
        "width": 780
      },
      "id": "997921ce-7d8b-4f32-81d0-a2f30d952db1",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        800,
        2672
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are given a message object with the structure:\n\ntype: {{ $json.messages[0].type }}\n\ntext body (if applicable): {{ $json.messages[0].text.body }}\n\nYour task is to analyze the message and classify it into exactly one category, returning only the corresponding number, based on the detailed rules below.\n\nðŸ“© If the type is \"text\":\nAnalyze the content in {{ $json.messages[0].text.body }} and classify based on the user's intent:\n\nâœ… Output 1 â†’ Leave Request\nUse this only if the message is about applying for leave, informing absence, or time off.\nExamples:\n\nâ€œI need leave for tomorrow.â€\n\nâ€œI wonâ€™t be coming in today.â€\n\nâ€œApply leave from 12th to 14th.â€\n\nâœ… Output 2 â†’ HR Chatbot (FAQ or Policy Queries)\nUse this for any general queries about HR policies, benefits, leave balances, holidays, or onboarding.\nExamples:\n\nâ€œHow many leaves do I have left?â€\n\nâ€œWhat is the dress code policy?â€\n\nâ€œWhere can I get my salary slip?â€\n\nâœ… Output 5 â†’ Shortlisting Request\nUse this if the user is instructing to filter, rank, or shortlist candidates for a particular job or JD.\nExamples:\n\nâ€œShortlist candidates for backend role.â€\n\nâ€œFilter CVs for the UI designer position.â€\n\nâœ… Output 4 â†’ Request or Complaint for Department Head\nUse this if the user is requesting to send an email to or escalate an issue to a department head or authority.\nExamples:\n\nâ€œRaise a complaint to admin.â€\n\nâ€œSend a mail to IT about my laptop.â€\n\nâ€œEscalate this matter to HR.â€\n\nðŸ“ If the type is \"location\":\nThis indicates attendance marking via GPS.\n\nâœ… Output 3\nðŸŽ™ï¸ If the type is \"audio\" or \"image\":\nAssume this is a general HR query via media. For example, a voice message asking for policy info or a photo of a document.\n\nâœ… Output 2\nðŸ”´ Final & Strict Instruction:\nYou must return only one of the following numbers:\n1, 2, 3, 4, or 5\nNo text. No description. No formatting. Only the number.\n\n",
        "batching": {}
      },
      "id": "5b584980-bcc0-4640-b075-f25b50a7dde8",
      "name": "Delegatory LLM",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        -2144,
        1632
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 595359392,
          "mode": "list",
          "cachedResultName": "leaves",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=595359392"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "name": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('name__using_to_match_', ``, 'string') }}",
            "available leaves": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('available_leaves', ``, 'string') }}",
            "last leave": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('last_leave', ``, 'string') }}"
          },
          "matchingColumns": [
            "name"
          ],
          "schema": [
            {
              "id": "name",
              "displayName": "name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "department head email",
              "displayName": "department head email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "available leaves",
              "displayName": "available leaves",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "last leave",
              "displayName": "last leave",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "attendance",
              "displayName": "attendance",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "department",
              "displayName": "department",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "f00ceb57-8f29-4832-9df6-a78030cd6855",
      "name": "update leaves",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        768,
        464
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 595359392,
          "mode": "list",
          "cachedResultName": "leaves",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=595359392"
        },
        "options": {}
      },
      "id": "dac2e856-0737-40bc-8684-0f69485a05fb",
      "name": "get leaves",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        640,
        464
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an autonomous leave request assistant for ICICI's internal HR system. And the date is {{ $today }}\nYou receive leave requests from employees through WhatsApp in plain text \n{{ $json.messages[0].text.body }}- this is the leave request text and details use the above \n- â€œI need a sick leave on 11th juneâ€\n- â€œI'm applying for medical leave from 11th to 14th Juneâ€\n- â€œCan I take a personal leave tomorrow?â€\nYour goal is to process each leave request correctly based on live employee data and respond with the appropriate action.\nTools You Can Use:\n1. **Google Sheets â€“ Get Rows Tool**\n   - Use this to retrieve employee records\n   - Sheet contains the following columns:\n     - `name`, `email`, `department head email`, `available leaves`, `last leave`, `attendance`, `department`\n2. **Google Sheets â€“ Append or Update Rows Tool**\n   - Use this to log any leave taken or updates if needed\n3. **Gmail Tool**\n   - Use this to send emails (e.g. approvals, forwarding to department heads)\nInput Format:\n- Each leave request comes from WhatsApp and contains:\n  - **Text** of the request (e.g. â€œI need a sick leave on 11th Juneâ€)\n  - **Name** of the requester, from WhatsApp contact:\n    `{{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}`\nYour Step-by-Step Logic:\n1. **Extract the following from the message:*{{ $json.messages[0].text.body }}*\n   - Dates requested (single or range)\n2. **Match the WhatsApp userâ€™s name** {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}with the **name** column in the Google Sheet using the `Get Rows` tool.\n3. **Check the employeeâ€™s available leaves.**\n   - If available leaves â‰¥ 1:\n     - âœ… **Sick leave for 1 day**:\n       - Compose an approval email to the employeeâ€™s email. Read it from the google sheet under the column \"email\"\n       - CC the department head (get email from google sheet under the column \"department head email\")\n       - Email body should include the leave date and confirmation\n       - Use Gmail Tool to send\n       - Update the employeeâ€™s record in Google Sheets:\n          Deduct 1 from available leaves\n          Set last leave to tomorrowâ€™s date (use {{ $now.plus({ days: 1 }).format(\"YYYY-MM-DD\") }})\n          Use the Update Rows tool\n       \n       - Send WhatsApp message:  \n         > â€œYour sick leave has been approved. Please check your email.â€\n     - âœ… **Multi-day or non-sick leave**:\n       - Compose a **leave request email to the department head** (get email from google sheet under the column \"department head email\")\n       - Include reason, dates, and requesterâ€™s name\n       - CC the employee (get email from google sheet under the column \"email\")\n       - Don't say it's approved in the output- say it's being reviewed.\n       - Send WhatsApp message:  \n         > â€œYour leave request has been forwarded to your department head for approval.â€\n\n   - âŒ If no available leaves:\n     - Do not send email\n     - Send WhatsApp message:  \n       > â€œYou currently have no available leaves. Please contact HR if you believe this is an error.â€\n\n\nDO NOT\n- Hallucinate any leave status\n- Invent dates or assume approval\n- Reply with personal opinions\n- only use the {{ $json.messages[0].text.body }} to reply, don't use the example text.",
        "options": {}
      },
      "id": "22772e9a-029e-4cb7-9a29-b2308bfa538a",
      "name": "Leave Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        512,
        240
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}\n{{ $json.messages[0].text.body }}\n{{ $json.content }}",
        "options": {
          "systemMessage": "=You are an autonomous HR assistant chatbot for ICICI employees.\n\nYou support inputs from text, audio, and image transcription.\n\nYou have access to a tool called `icici_policy_vector_store` that lets you retrieve official ICICI HR policies and documents.\n\nWhen answering **any HR policy-related question** (e.g., about leave, holidays, code of conduct, dress code, hybrid policy), always use this tool internally to retrieve information and guide your response. Do not mention that you are using the tool, vector search, or any database. Simply respond as if you already know the answer.\n\nIf the tool does not return any documents, respond clearly:\n> â€œI couldnâ€™t find an official document for this, but hereâ€™s what I can share based on general HR practices.â€\n  \n\nYou also have access to a Google Sheet tool \"attendance\" containing employee attendance. When a user asks about their attendance:\n- Count how many rows match their name\n- Each row is a day present\n- Count how many of those have Entry Time â‰¤ 09:15 and Exit Time > 17:15 for overtime\nRespond like: â€œYou were present for 20 days this month, with 5 days of overtime.â€\n\nIf a user thanks you or ends the conversation, close politely.\n\nIf an employee asks about their leaves, use the google sheet tool \"leaves\" to get available leaves for that employee. \nKeep all responses professional, friendly, helpful, and aligned with ICICIâ€™s HR voice.\n {{ $json.contacts[0].profile.name }} use this to match the profile",
          "returnIntermediateSteps": true
        }
      },
      "id": "8d6db8e7-2964-4984-a31c-465ea3ec2ed7",
      "name": "HR Chatbot",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        4176,
        704
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "description": "\"toolDescription\": \" policy document search tool\"\n"
      },
      "id": "86fddc05-ff91-4776-9e88-084f048a6643",
      "name": "policy_vector_store",
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "position": [
        4384,
        1008
      ],
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].image.id }}"
      },
      "id": "440fa0bc-3f5d-490c-95f8-3c4602256288",
      "name": "download media",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2464,
        1264
      ],
      "webhookId": "fcdf5cc5-2fd6-4f87-931a-a7a08ae97bdd",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.messages[0].audio.id }}"
      },
      "id": "bb59a6c7-1486-4c27-850e-f9bbc9dab06c",
      "name": "download media1",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2464,
        1024
      ],
      "webhookId": "2daa8661-ed96-49e5-9fe9-80da4ee7a7b5",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "779755641885061",
        "recipientPhoneNumber": "={{ $('WhatsApp Trigger').item.json.messages[0].from }}",
        "textBody": "={{ $json.output.message }}\n{{ $json.output }}",
        "additionalFields": {}
      },
      "id": "d6293dd6-bf47-4cce-8a18-7c9e0babacca",
      "name": "WhatsApp Responder",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        3472,
        2368
      ],
      "webhookId": "02c7d36b-01e8-41bf-b0e9-978e38f818ce",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Step 1: Determine if user is inside the office.\n\nThe value is: {{ $json.isInsideOffice }}\n\n- If this value is `true` (boolean true, or the string \"true\"), proceed to Step 2.\n- If this value is `false` (boolean false, or the string \"false\"), output only this exact message:\n\"not in office please resend location when inside the building\"\n\nFollow the steps below precisely:\n\nStep 1: set inside = {{ $json.isInsideOffice }}\n\nIf the value of inside is false, output only this exact message:\n\"not in office please resend location when inside the building\"\n\nIf  true, proceed to Step 2.\n\nStep 2: Extract User Info\nExtract the following:\n\nUser Name â†’ {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}\n\nCurrent DateTime â†’ {{ $now }}\n\nFormat it as: hh:mm, DD-MM-YYYY\n\nStep 3: Google Sheet Attendance Logic\nuse the getrows tool and search for a row where:\n\nName equals {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}\n\n\nDate equals today (based on formatted {{ $now }})\n\nThen:\n\nCase A: No matching row found\nâž• Create a new row with the following: using putrows tool\nName: {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}\n\n\nDate: today\nName : {{ $json.contacts[0].profile.name }}\nEntry Time: current time (hh:mm), Date ( eg: 11th june, 10am)\n\nExit Time: (leave blank)\n\nCase B: Matching row exists & Exit Time is blank using getrows and putrows tool\n\nðŸ•“ Update the existing rowâ€™s Exit Time with current time.\n\nCase C: Matching row exists & Exit Time is already filled\nâœ… Do nothing or optionally return: using google sheet 5 tool\n\"You have already logged both entry and exit for today.\"\n\nOutput Format:\nReturn a message like:\n\"Entry time logged: 09:45, 11-06-2025\"\n\"Exit time updated: 18:10, 11-06-2025\"\nOr, if already marked:\n\"You have already logged both entry and exit for today.\"\n\nðŸ” Summary:\nOnly proceed if user is inside the office using {{ $json.isInsideOffice }}\nUse Google Sheets to track attendance per name per day.\n\nLog times in hh:mm, DD-MM-YYYY format.\n\nAvoid duplicate exit entries.",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "4b2b3464-aaf2-436b-9b6a-3ba0ba749da6",
      "name": "Attendance Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1040,
        2128
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=based on {{ $('WhatsApp Trigger').item.json.messages[0].text.body }} , you need to generate an email for the users dept head from the google sheets tool and generate a mail based on whats in the whatspp message body \nitll be to the dept head email from the sheet (from google sheet under the column \"department head email\").\nmatch using {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }}\nand generate a proper mail and send it with the gmail tool. Use {{ $('WhatsApp Trigger').item.json.contacts[0].profile.name }} in the sign off too. ",
        "options": {}
      },
      "id": "3576cc5a-c1ac-41db-9797-c7a50dde9d5a",
      "name": "Email Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1088,
        2832
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.messages[0].text.body }} is the user input.\nuse the JD sheet tool to extract the respective JD for the given poistion in the user input.\nuse the applicants sheets tool to extract applicant data , only name, email phone, you have a filter for returning only rows matching the required \"applied for\" role\nuse n8n tool to get cv text and compare with jd and make reaons for required output parser content\nalways return a new output with proper reasoning\ngive a score 1-10 based on exp, relevance of projects and listed skills\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "916e9fd1-60fc-44fb-8779-c59dcb6e3244",
      "name": "Shortlist Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        944,
        3488
      ],
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=create a meeting for the user based on google calendar tool. meeting should be 2 days after {{ $today }} and between 11 and 12pm and 30 mins long.\ndont forget to output time and date in the message with human readable formatting\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "fc663fa7-2031-43cc-9484-75cd7b153ddc",
      "name": "Book Meeting",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1744,
        3488
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc/edit?usp=drivesdk",
          "cachedResultName": "Untitled spreadsheet"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1cV4GluXOU9d1xXON9yW80ZYPFEhQfizzDjcc8xwpeNc/edit#gid=0",
          "cachedResultName": "rec shortlist sheet"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Name"
            }
          ]
        },
        "options": {}
      },
      "id": "3e1fe705-d171-47b2-942b-f3ab5e23302d",
      "name": "get mail",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        2848,
        3872
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "phoneNumberId": "635212696350193",
        "recipientPhoneNumber": "919108281677",
        "message": "={{ $json.output.message }}\n\n{{ $json.output.link }}",
        "options": {}
      },
      "id": "4ff40e6f-5da5-4c62-b85f-858cdd55baa2",
      "name": "WhatsApp Approval",
      "type": "n8n-nodes-base.whatsApp",
      "position": [
        2192,
        3472
      ],
      "webhookId": "a86f6836-0317-412a-98a1-a006bbbba9c4",
      "typeVersion": 1,
      "credentials": {
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        3616,
        1040
      ],
      "id": "3aa5e51a-0e77-4d6b-8e5f-eb31f4dd4bdd",
      "name": "Transcribe a recording",
      "credentials": {
        "googlePalmApi": {
          "id": "UoegopAf9B7E6UKT",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        3360,
        1280
      ],
      "id": "38c8506f-c9f3-416f-b253-7005b94f66b3",
      "name": "Analyze image",
      "credentials": {
        "googlePalmApi": {
          "id": "UoegopAf9B7E6UKT",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "ccList": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('CC', ``, 'string') }}",
          "senderName": "AI HR "
        }
      },
      "id": "7653e278-7a23-4ddd-b089-834c4f61525d",
      "name": "Gmail",
      "type": "n8n-nodes-base.gmailTool",
      "position": [
        880,
        464
      ],
      "webhookId": "aaf440fe-894f-44aa-95b1-1e781f647523",
      "typeVersion": 2.1,
      "credentials": {
        "gmailOAuth2": {
          "id": "GwE8kZsToPV68IWi",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1610217683,
          "mode": "list",
          "cachedResultName": "rec_shortlist_sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=1610217683"
        },
        "options": {}
      },
      "id": "7a7b9ad8-1af9-4379-9b40-e4a97fc9a589",
      "name": "getrows",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        1232,
        2304
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1610217683,
          "mode": "list",
          "cachedResultName": "rec_shortlist_sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=1610217683"
        },
        "options": {}
      },
      "id": "2ecf74e3-5aaa-4e5b-8ed0-381f5fea15dc",
      "name": "attendance",
      "type": "n8n-nodes-base.googleSheetsTool",
      "position": [
        4528,
        880
      ],
      "typeVersion": 4.6,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc",
          "mode": "list",
          "cachedResultName": "whatsappHR",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 595359392,
          "mode": "list",
          "cachedResultName": "leaves",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IdnyQQl99pj20eHyVDe__LzXnM329vuV6HSk8ciKLFc/edit#gid=595359392"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        4608,
        784
      ],
      "id": "be51020d-aeb0-4b27-8673-d87956c110d6",
      "name": "leaves",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "i6LzMNq87EXlMZGt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "FAQ / Chatbot Agent\nSwitch checks message type: text, audio, or image\nUses OpenAI to transcribe audio/image if needed\n\nAgent answers general FAQs\nIf policy-related â†’ searches embeddings from vector store (preloaded with company policy docs)\nReturns closest match as reference in reply\n",
        "height": 1120,
        "width": 2120,
        "color": 6
      },
      "id": "716fe704-bb3c-43b7-94a8-60706ca4b205",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2048,
        480
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "whatsAppApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2672,
        1024
      ],
      "id": "7d38b0c6-6fc0-46f4-a038-eb400165cca5",
      "name": "HTTP Request",
      "credentials": {
        "whatsAppApi": {
          "id": "vTqz00pwGa2UHDbe",
          "name": "WhatsApp account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Personalize email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "n8n": {
      "ai_tool": [
        [
          {
            "node": "Shortlist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Attendance Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail1": {
      "ai_tool": [
        [
          {
            "node": "Personalize email",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Gmail2": {
      "ai_tool": [
        [
          {
            "node": "Email Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Verify Message Type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Email Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Shortlist Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "JD tool": {
      "ai_tool": [
        [
          {
            "node": "Shortlist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "putrows": {
      "ai_tool": [
        [
          {
            "node": "Attendance Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "get mail": {
      "ai_tool": [
        [
          {
            "node": "Personalize email",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HR Chatbot": {
      "main": [
        [
          {
            "node": "WhatsApp Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "applicants": {
      "ai_tool": [
        [
          {
            "node": "Shortlist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "get leaves": {
      "ai_tool": [
        [
          {
            "node": "Leave Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "HR Chatbot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email Agent": {
      "main": [
        [
          {
            "node": "WhatsApp Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Leave Agent": {
      "main": [
        [
          {
            "node": "WhatsApp Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Book Meeting": {
      "main": [
        [
          {
            "node": "WhatsApp Approval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "HR Chatbot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "HR Chatbot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Leave Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Analyze image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update leaves": {
      "ai_tool": [
        [
          {
            "node": "Leave Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Delegatory LLM": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets2": {
      "main": [
        [
          {
            "node": "Book Meeting",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "download media": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "Book Meeting",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Shortlist Agent": {
      "main": [
        [
          {
            "node": "Google Sheets2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "dept head email": {
      "ai_tool": [
        [
          {
            "node": "Email Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "download media1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Attendance Agent": {
      "main": [
        [
          {
            "node": "WhatsApp Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Delegatory LLM",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "HR Chatbot",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Personalize email": {
      "main": [
        [
          {
            "node": "WhatsApp Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Approval": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "policy_vector_store",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Leave Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Attendance Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Shortlist Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "Book Meeting",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Email Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "Delegatory LLM",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Verify Message Type": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "download media1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "download media",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "policy_vector_store": {
      "ai_tool": [
        [
          {
            "node": "HR Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_vectorStore": [
        [
          {
            "node": "policy_vector_store",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Shortlist Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Book Meeting",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Attendance Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Transcribe a recording": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail": {
      "ai_tool": [
        [
          {
            "node": "Leave Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "getrows": {
      "ai_tool": [
        [
          {
            "node": "Attendance Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "attendance": {
      "ai_tool": [
        [
          {
            "node": "HR Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "leaves": {
      "ai_tool": [
        [
          {
            "node": "HR Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Transcribe a recording",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "06240b26-eb29-4e66-acc4-416c1dfdd81a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "92897899e43cb5f4ab79bd0f0cc53ff5ed4ac039aacc32039356fda35bcb92c7"
  },
  "id": "MnfuelolBXf3lwyk",
  "tags": []
}