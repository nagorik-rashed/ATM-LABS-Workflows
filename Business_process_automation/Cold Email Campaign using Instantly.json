{
  "name": "Cold Email Campaign using Instantly",
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apify.com/v2/acts/pipelinelabs~lead-scraper-apollo-zoominfo-lusha/run-sync-get-dataset-items?token=apify_api_94h7xF7SGXw6GCGFuaZROyBvukyZtz2r7432",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n    \"companyEmployeeSize\": [\n        \"51 - 200\"\n    ],\n    \"contactEmailStatus\": [\n        \"Verified\"\n    ],\n    \"hasEmail\": true,\n    \"hasPhone\": false,\n    \"personCountry\": [\n        \"United States\"\n    ],\n    \"personTitle\": [\n        \"CEO\",\n        \"CTO\"\n    ],\n    \"seniority\": [\n        \"Founder\"\n    ],\n    \"totalResults\": 100\n}",
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -976,
        208
      ],
      "id": "0b91a8a7-9b14-4585-ac19-925fcba384b6",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M",
          "mode": "list",
          "cachedResultName": "Cold Mail",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $json.personId }}",
            "first_name": "={{ $json.firstName }}",
            "last_name": "={{ $json.lastName }}",
            "name": "={{ $json.fullName }}",
            "email": "={{ $json.email }}",
            "email_status": "={{ $json.emailStatus }}",
            "organization/name": "={{ $json.orgName }}",
            "industry": "={{ $json.orgIndustry }}",
            "organization/website_url": "={{ $json.orgWebsite }}",
            "city": "={{ $json.orgCity }}",
            "country": "={{ $json.orgCountry }}",
            "estimated_num_employees": "={{ $json.orgSize }}",
            "Icebreaker": "FILL",
            "Org Description": "={{ $json.orgDescription }}",
            "Org Specialities": "={{ $json.orgSpecialities }}",
            "Title": "={{ $json.position }}",
            "LinkedIn": "={{ $json.linkedinUrl }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "first_name",
              "displayName": "first_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "last_name",
              "displayName": "last_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "name",
              "displayName": "name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "email_status",
              "displayName": "email_status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/name",
              "displayName": "organization/name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "industry",
              "displayName": "industry",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/website_url",
              "displayName": "organization/website_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "city",
              "displayName": "city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "country",
              "displayName": "country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estimated_num_employees",
              "displayName": "estimated_num_employees",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Org Description",
              "displayName": "Org Description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Org Specialities",
              "displayName": "Org Specialities",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Icebreaker",
              "displayName": "Icebreaker",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -752,
        208
      ],
      "id": "088af8ce-865a-4d7c-aaa8-3677c19965cd",
      "name": "Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "pRREoPysXbFJnhqS",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4537e215-2aef-453d-985c-a05cf8b0b46f",
              "leftValue": "={{ $json.Icebreaker }}",
              "rightValue": "FILL",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -320,
        208
      ],
      "id": "71afd15a-3ae0-4f19-b348-77a7d0386167",
      "name": "If"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -96,
        208
      ],
      "id": "b8f01c75-189e-4a29-9f13-21b1154f046b",
      "name": "Loop Over Items",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=Input data fields:  \n  - first name  {{ $json.first_name }}\n  - last name  {{ $json.last_name }}\n  - city  {{ $json.city }}\n  - title  {{ $json.Title }}\n  - organization name  {{ $json['organization/name'] }}\n  - Industry {{ $json.industry }}\n  - org description {{ $json['Org Description'] }}\n  - org specialities {{ $json['Org Specialities'] }}"
            },
            {
              "content": "=You are an AI agent responsible for generating a short, friendly cold email icebreaker that leads into a pitch. Each icebreaker should feel personal, warm, and grounded in the recipient’s background, with optional references to shared context from the sender (user).\n\n## Context  \n- These icebreakers are used at the top of cold emails to set a friendly, non-salesy tone.  \n- The goal is to create instant rapport, not to pitch.  \n- The output must be labeled as `icebreaker`.  \n- Avoid generic phrasing like \"always great to connect with people in X\"—focus directly on the recipient.  \n- Long company names should be simplified to how they would be said in conversation.  \n\n## Instructions  \n1. Use the recipient’s first name to begin.  \n2. Reference a detail from their background (title, company, city, industry, or keywords).  \n3. Optionally, draw on the user’s background to highlight shared context (e.g. both based in Denver, both work in lead gen, etc.).  \n4. Follow with a soft prompt like “Was hoping to run something by you” or “Wanted to get your take on something.”  \n5. Format the icebreaker as:  \n   `\"Hey [first_name],\\n\\n[Sentence 1]. [Sentence 2]\"`  \n6. Output must be labeled as `icebreaker` exactly.  \n7. Message should not exceed 300 characters.  \n\n## Tools  \nInput data fields:  \n  - first name  {{ $json.first_name }}\n  - last name  {{ $json.last_name }}\n  - city  {{ $json.city }}\n  - title  {{ $json.Title }}\n  - organization name  {{ $json['organization/name'] }}\n  - Industry {{ $json.industry }}\n  - org description {{ $json['Org Description'] }}\n  - org specialities {{ $json['Org Specialities'] }}\n- Optional user data (sender):  \n  - (See additional user prompt) \n\n## Examples  \n- Input:  \n  - first name: Aina  \n  - organization name: Maki International  \n- Output:  \n  - `icebreaker: \"Hey Aina,\\n\\nLove what you’ve built over at Maki. Was hoping to run something by you.\"`  \n\n- Input:  \n  - first name: Jake  \n  - city: Denver  \n- Output:  \n  - `icebreaker: \"Hey Jake,\\n\\nNoticed you're based in Denver—me too. Wanted to run something by you.\"`  \n\n- Input:  \n  - first name: Priya  \n  - title: Growth Marketer  \n  - industry: SaaS  \n- Output:  \n  - `icebreaker: \"Hey Priya,\\n\\nSaw you're leading growth in SaaS—really cool space. Was hoping to run something by you.\"`  \n\n- Input:  \n  - first name: Leo  \n  - brand keyword 1: lead gen  \n- Output:  \n  - `icebreaker: \"Hey Leo,\\n\\nNoticed you're deep in lead gen—that caught my eye. Wanted to run something by you.\"`  \n\n## SOP (Standard Operating Procedure)  \n1. Use the recipient’s first name to start.  \n2. Extract a specific, interesting detail from the input data.  \n3. If appropriate, reference the user’s shared context (e.g., mutual location, industry focus).  \n4. Write a two-line message that feels natural, not scripted.  \n5. Output must be prefixed with `icebreaker:` and follow the format:  \n   `\"Hey [first_name],\\n\\n[Sentence 1]. [Sentence 2]\"`  \n6. Keep the message under 300 characters total.  \n\n## Final Notes  \n- Do not include emojis, links, hashtags, or formalities.  \n- Avoid generic intros and focus on personalized, 1:1 tone.  \n- Think of the icebreaker like a quick, thoughtful DM that tees up a conversation.  \n---",
              "role": "system"
            }
          ]
        },
        "simplify": false,
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        128,
        208
      ],
      "id": "9e6b3aa0-1fab-451c-b201-61aca261d951",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "Tv5GJdP4QO6RDPCY",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M",
          "mode": "list",
          "cachedResultName": "Cold Mail",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19ruN35c-5lEMcW6XrrtJjOgecipdwdRi2VnPD52U45M/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Loop Over Items').item.json.id }}",
            "Icebreaker": "={{ $json.choices[0].message.content.icebreaker }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "first_name",
              "displayName": "first_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "last_name",
              "displayName": "last_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "name",
              "displayName": "name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "email_status",
              "displayName": "email_status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "linkedin_url",
              "displayName": "linkedin_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "headline",
              "displayName": "headline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/name",
              "displayName": "organization/name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "industry",
              "displayName": "industry",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/website_url",
              "displayName": "organization/website_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "city",
              "displayName": "city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "country",
              "displayName": "country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "state",
              "displayName": "state",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estimated_num_employees",
              "displayName": "estimated_num_employees",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/keywords/0",
              "displayName": "organization/keywords/0",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/keywords/1",
              "displayName": "organization/keywords/1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "organization/keywords/2",
              "displayName": "organization/keywords/2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Icebreaker",
              "displayName": "Icebreaker",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        480,
        280
      ],
      "id": "13b1836c-ace9-468c-b5bc-65ed3dbb1713",
      "name": "Google Sheets1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "pRREoPysXbFJnhqS",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "32160c50-aea9-4e40-8c1b-b0d73657cdf0",
              "name": "Icebreaker",
              "value": "={{ $json.Icebreaker }}",
              "type": "string"
            },
            {
              "id": "abf359bd-351e-438b-aa1d-51c866b7ef6f",
              "name": "first_name",
              "value": "={{ $('Google Sheets').item.json.first_name }}",
              "type": "string"
            },
            {
              "id": "f0fe00ce-9f4a-44f9-8824-334a5f7123ec",
              "name": "last_name",
              "value": "={{ $('Google Sheets').item.json.last_name }}",
              "type": "string"
            },
            {
              "id": "6d8dc883-41d2-4885-b128-fa3675e7934e",
              "name": "email",
              "value": "={{ $('Google Sheets').item.json.email }}",
              "type": "string"
            },
            {
              "id": "91383c7e-7843-4326-8c42-5910dbdbe0ae",
              "name": "copany_name",
              "value": "={{ $('Google Sheets').item.json['organization/name'] }}",
              "type": "string"
            },
            {
              "id": "af18970e-9924-4a74-8df0-b4503310def2",
              "name": "website",
              "value": "={{ $('Google Sheets').item.json['organization/website_url'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        192,
        16
      ],
      "id": "a2c5ae9d-125e-429b-9936-adcb08bd0830",
      "name": "Edit Fields"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -1200,
        280
      ],
      "id": "219f0129-2562-47b7-bae2-ef6a4c0f48cc",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.instantly.ai/api/v2/leads",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer ZTllMzk1MmMtZGIyNC00MzgyLWE2MWQtOWM0YTliNDllOWVlOnlVd2R2enhjSFhibw=="
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "personalization",
              "value": "={{ $json.Icebreaker }}"
            },
            {
              "name": "first_name",
              "value": "={{ $json.first_name }}"
            },
            {
              "name": "last_name",
              "value": "={{ $json.last_name }}"
            },
            {
              "name": "email",
              "value": "={{ $json.email }}"
            },
            {
              "name": "company_name",
              "value": "={{ $json.copany_name }}"
            },
            {
              "name": "website",
              "value": "={{ $json.website }}"
            },
            {
              "name": "campaign",
              "value": "13c4d40b-e48b-4f7a-aa4e-a7407670c175"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        16
      ],
      "id": "e0a6ac08-0b01-4ad3-9cd3-ea8942595ced",
      "name": "Instantly AI"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1200,
        88
      ],
      "id": "c03b8b98-3012-4e49-972c-95b3439bfb9f",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "maxItems": 50
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -544,
        208
      ],
      "id": "8866f63a-bc5d-4803-b53d-a00a1fb529cc",
      "name": "Limit"
    }
  ],
  "pinData": {},
  "connections": {
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Google Sheets1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Instantly AI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Instantly AI": {
      "main": [
        []
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "49a52ce6-4cc9-487a-86d7-f2dcfe1f09fa",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "7ae231d5a92eb748d26d32057909897e96a0e49a938f8c7913f7497f81fe3781"
  },
  "id": "3AapjyLQZhT13u2M",
  "tags": []
}